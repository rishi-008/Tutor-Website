{"ast":null,"code":"import React,{useState}from'react';import{useLocation}from'react-router-dom';import Sidebar from'./Sidebar';import StudentExplorePage from'./studentpages/StudentExplorePage';import StudentMyCoursesPage from'./studentpages/StudentMyCoursesPage';import TutorMyCoursesPage from'./tutorpages/TutorMyCoursesPage';import TutorCoursePage from'./tutorpages/TutorCoursePage';import StudentNotificationsPage from'./studentpages/StudentNotificationsPage';import StudentSettingsPage from'./studentpages/StudentSettingsPage';import TutorProfilePage from'./tutorpages/TutorProfilePageEditable';import'../styles/UserDashboard.css';import{getNotifications,getTutorById}from'../controllers/AccountController';import{getActiveTutorSessions,getCanceledTutorSessions,getPendingTutorSessions}from'../controllers/SessionController';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserDashboard(){var _location$state,_location$state2;const[selectedContent,setSelectedContent]=useState('explore');const[selectedCourse,setSelectedCourse]=useState(null);const[isDropdownOpen,setIsDropdownOpen]=useState(false);const[notifications,setNotifications]=useState([]);const[declinedCourses,setDeclinedCourses]=useState([]);const[pendingCourses,setPendingCourses]=useState([]);const[inProgressCourses,setInProgressCourses]=useState([]);// const [tutorInfo, setTutorInfo] = useState({});\nconst testUser={\"id\":0,\"password\":\"test\",\"email\":\"student@example.com\",\"student\":{\"name\":\"John Doe\",\"age\":20,\"major\":\"Computer Science\",\"birthday\":\"\",\"language\":\"english\"},\"isAdmin\":false,\"notifications\":[{\"id\":1,\"message\":\"Urgent: Tutor has dropped your connection request.\",\"category\":\"urgent\"},{\"id\":2,\"message\":\"You have a new connection request from Tutor A.\",\"category\":\"unread\"},{\"id\":3,\"message\":\"Your session with Tutor B has been scheduled.\",\"category\":\"read\"},{\"id\":4,\"message\":\"Urgent: Tutor C accepted your connection request.\",\"category\":\"urgent\"},{\"id\":5,\"message\":\"Reminder: Your next session with Tutor D is in 2 hours.\",\"category\":\"unread\"},{\"id\":6,\"message\":\"You have successfully completed your session with Tutor E.\",\"category\":\"read\"}],\"proofdoc\":null,\"isApproved\":true};const location=useLocation();const user=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.user)||testUser;const isTutor=(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.isTutor;// console.log('User: ', user.tutor.name);\nReact.useEffect(()=>{async function fetchData(){const active=await getActiveTutorSessions(user.tutor.name);const canceled=await getCanceledTutorSessions(user.tutor.name);const pending=await getPendingTutorSessions(user.tutor.name);const n=await getNotifications(user.id,user.tutor);// const latestTutorInfo = await getTutorById(user.id);\nconsole.log(\"these are the notificaationsd\",n);console.log(pending);setDeclinedCourses(canceled);setPendingCourses(pending);setInProgressCourses(active);setNotifications(n);// setTutorInfo(latestTutorInfo);\n}fetchData();},[]);const onCourseSelect=course=>{setSelectedCourse(course);setSelectedContent('course');};const toggleDropdown=()=>setIsDropdownOpen(!isDropdownOpen);const renderContent=()=>{// If we want this side bar to appear on the left side of the screen for something like the tutor profile page or the tutor search page based on the searched item then we can probably just update the value given to selectedContent to be that of the tutopr pafge (add another case to the switch statement) or whatever page. W#e'll just need to make it so we update the state or whatever somehow\nswitch(selectedContent){case'explore':return/*#__PURE__*/_jsx(StudentExplorePage,{});case'notifications':return/*#__PURE__*/_jsx(StudentNotificationsPage,{notifications:notifications});case'myCourses':return/*#__PURE__*/_jsx(TutorMyCoursesPage,{setSelectedContent:setSelectedContent,setSelectedCourse:setSelectedCourse,inProgressCourses:inProgressCourses,pendingCourses:pendingCourses,declinedCourses:declinedCourses});case'course':return/*#__PURE__*/_jsx(TutorCoursePage,{course:selectedCourse,setSelectedContent:setSelectedContent});case'settings':return/*#__PURE__*/_jsx(StudentSettingsPage,{});case'profile':console.log(\"this is the tutor object that's going in\",user);return/*#__PURE__*/_jsx(TutorProfilePage,{tutor:user});default:return/*#__PURE__*/_jsx(\"div\",{children:\"Welcome\"});}};// console.log(\"this is test of extracting info\", tutorInfo.tutor);\n// React.useEffect(() => {\n//     getTutorById(user.id).then(tutor => {\n//         console.log(\"this is test of extracting info\", tutor.tutor);\n//         setTutorInfo(tutor);\n//     });\n// }, [user.id]);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"tutorProfilePage\",{}),/*#__PURE__*/_jsx(Sidebar,{onSelect:setSelectedContent,toggleDropdown:toggleDropdown,isDropdownOpen:isDropdownOpen,courses:inProgressCourses,onCourseSelect:onCourseSelect,isTutor:isTutor}),/*#__PURE__*/_jsx(\"main\",{className:\"dashboardContent\",children:renderContent()})]});}export default UserDashboard;","map":{"version":3,"names":["React","useState","useLocation","Sidebar","StudentExplorePage","StudentMyCoursesPage","TutorMyCoursesPage","TutorCoursePage","StudentNotificationsPage","StudentSettingsPage","TutorProfilePage","getNotifications","getTutorById","getActiveTutorSessions","getCanceledTutorSessions","getPendingTutorSessions","jsx","_jsx","jsxs","_jsxs","UserDashboard","_location$state","_location$state2","selectedContent","setSelectedContent","selectedCourse","setSelectedCourse","isDropdownOpen","setIsDropdownOpen","notifications","setNotifications","declinedCourses","setDeclinedCourses","pendingCourses","setPendingCourses","inProgressCourses","setInProgressCourses","testUser","location","user","state","isTutor","useEffect","fetchData","active","tutor","name","canceled","pending","n","id","console","log","onCourseSelect","course","toggleDropdown","renderContent","children","className","onSelect","courses"],"sources":["/workspaces/Tutor-Website/frontend/src/pages/TutorDashboard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport StudentExplorePage from './studentpages/StudentExplorePage';\nimport StudentMyCoursesPage from './studentpages/StudentMyCoursesPage';\nimport TutorMyCoursesPage from './tutorpages/TutorMyCoursesPage';\nimport TutorCoursePage from './tutorpages/TutorCoursePage';\nimport StudentNotificationsPage from './studentpages/StudentNotificationsPage';\nimport StudentSettingsPage from './studentpages/StudentSettingsPage';\nimport TutorProfilePage from './tutorpages/TutorProfilePageEditable';\nimport '../styles/UserDashboard.css';\nimport { getNotifications, getTutorById } from '../controllers/AccountController';\nimport { getActiveTutorSessions, getCanceledTutorSessions, getPendingTutorSessions } from '../controllers/SessionController';\n\nfunction UserDashboard() {\n    const [selectedContent, setSelectedContent] = useState('explore');\n    const [selectedCourse, setSelectedCourse] = useState(null);\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [notifications, setNotifications] = useState([]);\n    const [declinedCourses, setDeclinedCourses] = useState([]);\n    const [pendingCourses, setPendingCourses] = useState([]);\n    const [inProgressCourses, setInProgressCourses] = useState([]);\n    // const [tutorInfo, setTutorInfo] = useState({});\n\n    const testUser = {\n        \"id\": 0,\n        \"password\": \"test\",\n        \"email\": \"student@example.com\",\n        \"student\": {\n            \"name\": \"John Doe\",\n            \"age\": 20,\n            \"major\": \"Computer Science\",\n            \"birthday\": \"\",\n            \"language\": \"english\"\n        },\n        \"isAdmin\": false,\n        \"notifications\": [\n            {\n                \"id\": 1,\n                \"message\": \"Urgent: Tutor has dropped your connection request.\",\n                \"category\": \"urgent\"\n            },\n            {\n                \"id\": 2,\n                \"message\": \"You have a new connection request from Tutor A.\",\n                \"category\": \"unread\"\n            },\n            {\n                \"id\": 3,\n                \"message\": \"Your session with Tutor B has been scheduled.\",\n                \"category\": \"read\"\n            },\n            {\n                \"id\": 4,\n                \"message\": \"Urgent: Tutor C accepted your connection request.\",\n                \"category\": \"urgent\"\n            },\n            {\n                \"id\": 5,\n                \"message\": \"Reminder: Your next session with Tutor D is in 2 hours.\",\n                \"category\": \"unread\"\n            },\n            {\n                \"id\": 6,\n                \"message\": \"You have successfully completed your session with Tutor E.\",\n                \"category\": \"read\"\n            }\n        ],\n        \"proofdoc\": null,\n        \"isApproved\": true\n    };\n\n    const location = useLocation();\n    const user = location.state?.user || testUser;\n    const isTutor = location.state?.isTutor;\n    // console.log('User: ', user.tutor.name);\n\n    React.useEffect(() => {\n        async function fetchData() {\n            const active = await getActiveTutorSessions(user.tutor.name);\n            const canceled = await getCanceledTutorSessions(user.tutor.name);\n            const pending = await getPendingTutorSessions(user.tutor.name);\n            const n = await getNotifications(user.id, user.tutor);\n            // const latestTutorInfo = await getTutorById(user.id);\n            console.log(\"these are the notificaationsd\", n);\n            console.log(pending);\n            setDeclinedCourses(canceled);\n            setPendingCourses(pending);\n            setInProgressCourses(active);\n            setNotifications(n);\n            // setTutorInfo(latestTutorInfo);\n        }\n        fetchData();\n    }, []);\n\n\n    const onCourseSelect = (course) => {\n        setSelectedCourse(course);\n        setSelectedContent('course');\n    };\n\n    const toggleDropdown = () => setIsDropdownOpen(!isDropdownOpen);\n\n    const renderContent = () => {\n\n        // If we want this side bar to appear on the left side of the screen for something like the tutor profile page or the tutor search page based on the searched item then we can probably just update the value given to selectedContent to be that of the tutopr pafge (add another case to the switch statement) or whatever page. W#e'll just need to make it so we update the state or whatever somehow\n        switch (selectedContent) {\n            case 'explore':\n                return <StudentExplorePage />;\n            case 'notifications':\n                return <StudentNotificationsPage notifications={notifications} />;\n            case 'myCourses':\n                return <TutorMyCoursesPage setSelectedContent={setSelectedContent} setSelectedCourse={setSelectedCourse} inProgressCourses={inProgressCourses} pendingCourses={pendingCourses} declinedCourses={declinedCourses} />;\n            case 'course':\n                return <TutorCoursePage course={selectedCourse} setSelectedContent={setSelectedContent} />;\n            case 'settings':\n                return <StudentSettingsPage />;\n            case 'profile':\n                console.log(\"this is the tutor object that's going in\",user);\n                return <TutorProfilePage tutor={user} />;\n            default:\n                return <div>Welcome</div>;\n        }\n    };\n\n    \n    // console.log(\"this is test of extracting info\", tutorInfo.tutor);\n    // React.useEffect(() => {\n    //     getTutorById(user.id).then(tutor => {\n    //         console.log(\"this is test of extracting info\", tutor.tutor);\n    //         setTutorInfo(tutor);\n    //     });\n    // }, [user.id]);\n\n    return (\n        <div className=\"container\">\n            <tutorProfilePage />\n            <Sidebar onSelect={setSelectedContent} toggleDropdown={toggleDropdown} isDropdownOpen={isDropdownOpen} courses={inProgressCourses} onCourseSelect={onCourseSelect} isTutor={isTutor} />\n            <main className=\"dashboardContent\">\n                {renderContent()}\n            </main>\n        </div>\n    );\n}\n\nexport default UserDashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,kBAAkB,KAAM,mCAAmC,CAClE,MAAO,CAAAC,oBAAoB,KAAM,qCAAqC,CACtE,MAAO,CAAAC,kBAAkB,KAAM,iCAAiC,CAChE,MAAO,CAAAC,eAAe,KAAM,8BAA8B,CAC1D,MAAO,CAAAC,wBAAwB,KAAM,yCAAyC,CAC9E,MAAO,CAAAC,mBAAmB,KAAM,oCAAoC,CACpE,MAAO,CAAAC,gBAAgB,KAAM,uCAAuC,CACpE,MAAO,6BAA6B,CACpC,OAASC,gBAAgB,CAAEC,YAAY,KAAQ,kCAAkC,CACjF,OAASC,sBAAsB,CAAEC,wBAAwB,CAAEC,uBAAuB,KAAQ,kCAAkC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7H,QAAS,CAAAC,aAAaA,CAAA,CAAG,KAAAC,eAAA,CAAAC,gBAAA,CACrB,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGvB,QAAQ,CAAC,SAAS,CAAC,CACjE,KAAM,CAACwB,cAAc,CAAEC,iBAAiB,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAC0B,cAAc,CAAEC,iBAAiB,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC4B,aAAa,CAAEC,gBAAgB,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC8B,eAAe,CAAEC,kBAAkB,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACgC,cAAc,CAAEC,iBAAiB,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACkC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CAC9D;AAEA,KAAM,CAAAoC,QAAQ,CAAG,CACb,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,qBAAqB,CAC9B,SAAS,CAAE,CACP,MAAM,CAAE,UAAU,CAClB,KAAK,CAAE,EAAE,CACT,OAAO,CAAE,kBAAkB,CAC3B,UAAU,CAAE,EAAE,CACd,UAAU,CAAE,SAChB,CAAC,CACD,SAAS,CAAE,KAAK,CAChB,eAAe,CAAE,CACb,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,oDAAoD,CAC/D,UAAU,CAAE,QAChB,CAAC,CACD,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,iDAAiD,CAC5D,UAAU,CAAE,QAChB,CAAC,CACD,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,+CAA+C,CAC1D,UAAU,CAAE,MAChB,CAAC,CACD,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,mDAAmD,CAC9D,UAAU,CAAE,QAChB,CAAC,CACD,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,yDAAyD,CACpE,UAAU,CAAE,QAChB,CAAC,CACD,CACI,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,4DAA4D,CACvE,UAAU,CAAE,MAChB,CAAC,CACJ,CACD,UAAU,CAAE,IAAI,CAChB,YAAY,CAAE,IAClB,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGpC,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAqC,IAAI,CAAG,EAAAlB,eAAA,CAAAiB,QAAQ,CAACE,KAAK,UAAAnB,eAAA,iBAAdA,eAAA,CAAgBkB,IAAI,GAAIF,QAAQ,CAC7C,KAAM,CAAAI,OAAO,EAAAnB,gBAAA,CAAGgB,QAAQ,CAACE,KAAK,UAAAlB,gBAAA,iBAAdA,gBAAA,CAAgBmB,OAAO,CACvC;AAEAzC,KAAK,CAAC0C,SAAS,CAAC,IAAM,CAClB,cAAe,CAAAC,SAASA,CAAA,CAAG,CACvB,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAA/B,sBAAsB,CAAC0B,IAAI,CAACM,KAAK,CAACC,IAAI,CAAC,CAC5D,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjC,wBAAwB,CAACyB,IAAI,CAACM,KAAK,CAACC,IAAI,CAAC,CAChE,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAAjC,uBAAuB,CAACwB,IAAI,CAACM,KAAK,CAACC,IAAI,CAAC,CAC9D,KAAM,CAAAG,CAAC,CAAG,KAAM,CAAAtC,gBAAgB,CAAC4B,IAAI,CAACW,EAAE,CAAEX,IAAI,CAACM,KAAK,CAAC,CACrD;AACAM,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEH,CAAC,CAAC,CAC/CE,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC,CACpBhB,kBAAkB,CAACe,QAAQ,CAAC,CAC5Bb,iBAAiB,CAACc,OAAO,CAAC,CAC1BZ,oBAAoB,CAACQ,MAAM,CAAC,CAC5Bd,gBAAgB,CAACmB,CAAC,CAAC,CACnB;AACJ,CACAN,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAGN,KAAM,CAAAU,cAAc,CAAIC,MAAM,EAAK,CAC/B5B,iBAAiB,CAAC4B,MAAM,CAAC,CACzB9B,kBAAkB,CAAC,QAAQ,CAAC,CAChC,CAAC,CAED,KAAM,CAAA+B,cAAc,CAAGA,CAAA,GAAM3B,iBAAiB,CAAC,CAACD,cAAc,CAAC,CAE/D,KAAM,CAAA6B,aAAa,CAAGA,CAAA,GAAM,CAExB;AACA,OAAQjC,eAAe,EACnB,IAAK,SAAS,CACV,mBAAON,IAAA,CAACb,kBAAkB,GAAE,CAAC,CACjC,IAAK,eAAe,CAChB,mBAAOa,IAAA,CAACT,wBAAwB,EAACqB,aAAa,CAAEA,aAAc,CAAE,CAAC,CACrE,IAAK,WAAW,CACZ,mBAAOZ,IAAA,CAACX,kBAAkB,EAACkB,kBAAkB,CAAEA,kBAAmB,CAACE,iBAAiB,CAAEA,iBAAkB,CAACS,iBAAiB,CAAEA,iBAAkB,CAACF,cAAc,CAAEA,cAAe,CAACF,eAAe,CAAEA,eAAgB,CAAE,CAAC,CACvN,IAAK,QAAQ,CACT,mBAAOd,IAAA,CAACV,eAAe,EAAC+C,MAAM,CAAE7B,cAAe,CAACD,kBAAkB,CAAEA,kBAAmB,CAAE,CAAC,CAC9F,IAAK,UAAU,CACX,mBAAOP,IAAA,CAACR,mBAAmB,GAAE,CAAC,CAClC,IAAK,SAAS,CACV0C,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAACb,IAAI,CAAC,CAC5D,mBAAOtB,IAAA,CAACP,gBAAgB,EAACmC,KAAK,CAAEN,IAAK,CAAE,CAAC,CAC5C,QACI,mBAAOtB,IAAA,QAAAwC,QAAA,CAAK,SAAO,CAAK,CAAC,CACjC,CACJ,CAAC,CAGD;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACItC,KAAA,QAAKuC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACtBxC,IAAA,sBAAmB,CAAC,cACpBA,IAAA,CAACd,OAAO,EAACwD,QAAQ,CAAEnC,kBAAmB,CAAC+B,cAAc,CAAEA,cAAe,CAAC5B,cAAc,CAAEA,cAAe,CAACiC,OAAO,CAAEzB,iBAAkB,CAACkB,cAAc,CAAEA,cAAe,CAACZ,OAAO,CAAEA,OAAQ,CAAE,CAAC,cACvLxB,IAAA,SAAMyC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAC7BD,aAAa,CAAC,CAAC,CACd,CAAC,EACN,CAAC,CAEd,CAEA,cAAe,CAAApC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}